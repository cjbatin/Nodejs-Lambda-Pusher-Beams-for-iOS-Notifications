const request = require('request-promise-native');

describe('publishToInterests', () => {
    const SDK_VERSION = '1.1.1';
    const instanceId = '25c7b7c2-cabc-4e6b-b7d0-c9ad5c787e50';
    let baseUrl = `${instanceId}.pushnotifications.pusher.com/publish_api/v1/instance_id/${instanceId}/publishes`;
    let baseRequest;

    beforeEach(() => {
        baseRequest = request.defaults({
            headers: {
                Authorization: `Bearer ${this.secretKey}`,
                'X-Pusher-Library': `pusher-push-notifications-node ${SDK_VERSION}`,
                'Content-Type': 'application/json'
            },
            json: true,
            simple: true,
            resolveWithFullResponse: true
        });
    });
    test('we get what we expect', () => {
        const body = {
            apns: {
                aps: {
                    alert: 'Hello there'
                }
            }
        };
        const options = {
            uri: baseUrl + '/interests',
            method: 'POST',
            headers: {
                'Content-Length': Buffer.byteLength(JSON.stringify(body))
            }
        };
        // request
    });
});

describe.skip('publishToUsers', () => {
    const SDK_VERSION = '1.1.1';
    const instanceId = '25c7b7c2-cabc-4e6b-b7d0-c9ad5c787e50';
    let baseUrl = `${instanceId}.pushnotifications.pusher.com/publish_api/v1/instance_id/${instanceId}/publishes`;
    let baseRequest;

    beforeEach(() => {
        baseRequest = request.defaults({
            headers: {
                Authorization: `Bearer ${this.secretKey}`,
                'X-Pusher-Library': `pusher-push-notifications-node ${SDK_VERSION}`,
                'Content-Type': 'application/json'
            },
            json: true,
            simple: true,
            resolveWithFullResponse: true
        });
    });
    test('we get what we expect', () => {
        const body = {
            apns: {
                aps: {
                    alert: 'Hello there'
                }
            }
        };
        const options = {
            uri: baseUrl + '/users',
            method: 'POST',
            headers: {
                'Content-Length': Buffer.byteLength(JSON.stringify(body))
            }
        };
        // request
    });
});
